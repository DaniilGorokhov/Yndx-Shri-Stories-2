!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var r,a=t();for(r in a)("object"==typeof exports?exports:e)[r]=a[r]}}(this,function(){return a={372:e=>{const a=new Map;e.exports={likes:a,commentHandler:function(e){let t;if(t="object"==typeof e.author?e.author.id:e.author,e={timestamp:e.createdAt,quantity:e.likes.length},a.has(t)){const r=a.get(t);r.push(e)}else{e=[e];a.set(t,e)}}}},183:e=>{const i=[],o=new Map;e.exports={commits:i,commitSummaries:o,commitHandler:function(r){let e;e="object"==typeof r.author?r.author.id:r.author;var t={id:r.id,author:e,timestamp:r.timestamp};i.push(t);const a=[];for(let t=0;t<r.summaries.length;t+=1){let e;e="object"==typeof r.summaries[t]?r.summaries[t].id:r.summaries[t],a.push(e)}o.set(r.id,a)}}},327:e=>{const a=[];var i={};e.exports={sprints:a,activeSprint:i,sprintHandler:function(e,t){if(void 0===t)throw new Error("error: activeSprint argument did not pass; it is necessary argument");const r={id:e.id,name:e.name,startAt:e.startAt,finishAt:e.finishAt};e.id===t&&(r.active=!0,Object.assign(i,r)),a.push(r)}}},919:e=>{const t=new Map;var r=new Map;e.exports={summaries:t,commitSummaries:r,summaryHandler:function(e){e={id:e.id,value:e.added+e.removed},t.set(e.id,e)}}},542:e=>{const t=new Map;e.exports={users:t,userHandler:function(e){return e={id:e.id,name:e.name,avatar:e.avatar},t.set(e.id,e),e.id}}},194:e=>{e.exports={binarySearchStartByProperty:function({array:e,itemProperty:t,value:r,valueProperty:a}){let i=-1,o=e.length;for(;o-i!=1;){var n=Math.round((i+o)/2);e[n][t]>r[a]?o=n:i=n}return i}}},522:e=>{e.exports={computeHeatMap:function(t,{startAt:r,finishAt:e}){var a=["mon","tue","wed","thu","fri","sat","sun"],i=(e-r)/7,o=i/24;const n={};for(let e=0;e<a.length;e+=1){const m=[];for(let e=0;e<24;e+=1)m.push(0);n[a[e]]=m}for(let e=0;e<t.length;e+=1){var s=t[e].timestamp-r,p=Math.floor(s/i)%7,s=Math.floor(s/o)%24;n[a[p]][s]+=1}return n}}},903:e=>{e.exports={computeStatistics:function({sprints:t,commitSummaries:r,summaries:a}){var i={min:0,mid:0,max:0,extra:0};const o=[];for(let e=0;e<t.length;e+=1){const l={...i};var n=t[e];for(let e=0;e<n.length;e+=1){var s=n[e],p=r.get(s.id);let t=0;if(p)for(let e=0;e<p.length;e+=1){var m=a.get(p[e]);t+=m.value}1001<=t?l.extra+=1:501<=t?l.max+=1:101<=t?l.mid+=1:1<=t&&(l.min+=1)}o.push(l)}return o}}},329:e=>{e.exports={getFormattedText:function(e,t,r,{valueHandler:a=null}={}){var i=Math.abs(e)%10,o=(Math.abs(e)%100-i)/10;let n;return n=a?a(e):e,1==o?`${n} ${t}${r.other}`:1==i?`${n} ${t}${r.one}`:1<i&&i<5?`${n} ${t}${r.twoFive}`:`${n} ${t}${r.other}`}}},680:e=>{e.exports={sortByProperty:function({array:e,propertyForSort:i,descending:o=!1}){e.sort((e,t)=>{var r=parseFloat(e[i]),a=parseFloat(t[i]);return r===a?o?e.id-t.id:t.id-e.id:o?a-r:r-a})}}},560:(e,t,r)=>{const{binarySearchStartByProperty:d}=r(194);e.exports={sprintCommits:function(t,r){const a=new Map;var i={startAt:t[t.length-1].finishAt+1};for(let e=0;e<r.length;e+=1){var o={...r[e]},n=d({array:[...t,i],itemProperty:"startAt",value:o,valueProperty:"timestamp"});if(-1!==n&&n!==t.length){n=t[n].id;if(a.has(n)){const u=a.get(n);u.push(o)}else a.set(n,[o])}}const s=[];let p,m;for(let e=0;e<t.length;e+=1){var l=t[e];const c={...l};l=a.get(l.id);l instanceof Array?c.commits=l:c.commits=[],c.active&&(p=c.commits,m=0===e?[]:s[e-1].commits),s.push(c)}return{sprintCommitsArray:s,activeCommits:p,previousCommits:m}}}},155:e=>{e.exports={userCommits:function(e,t){const a=new Map;for(let e=0;e<t.length;e+=1){var{author:r}=t[e],i=a.get(r)||0;a.set(r,i+1)}const o=[];return e.forEach((e,t)=>{const r=a.get(t)||0;e={id:e.id,name:e.name,avatar:e.avatar,valueText:r.toString()};o.push(e)}),o}}},422:(e,t,r)=>{const{getFormattedText:u}=r(329);e.exports={userLikes:function(e,s,{startAt:p,finishAt:m}){const l=[];return e.forEach((e,t)=>{const r={...e};var a=s.get(t);let i=0;if(a)for(let e=0;e<a.length;e+=1){var{timestamp:o,quantity:n}=a[e];p<=o&&o<=m&&(i+=n)}r.valueText=u(i,"голос",{one:"",twoFive:"а",other:"ов"}),l.push(r)}),l}}},754:e=>{class t{constructor(e){this.entities={data:e,next:null},this.tail=this.entities}next(){this.entities=this.entities.next}add(e){e={data:e,next:null};this.tail.next=e,this.tail=e}handleProperty({property:t,type:e="array-like"}){var{data:r}=this.entities;if("array-like"===e)for(let e=0;e<r[t].length;e+=1)"object"==typeof r[t][e]&&this.add(r[t][e]);else{if("not array-like"!==e)throw new Error("error: invalid type. type can be 'array-like' or 'not array-like'");"object"==typeof r[t]&&this.add(r[t])}}}e.exports={LinkedList:t}},138:(e,t,r)=>{const{LinkedList:u}=r(754),{users:c,userHandler:d}=r(542),{likes:f,commentHandler:h}=r(372),{sprints:y,activeSprint:v,sprintHandler:x}=r(327),{commits:g,commitSummaries:P,commitHandler:T}=r(183),{summaries:b,summaryHandler:k}=r(919),{userLikes:S}=r(422),{sortByProperty:w}=r(680),{sprintCommits:H}=r(560),{userCommits:j}=r(155),{computeStatistics:A}=r(903),{computeHeatMap:M}=r(522),{votePrepareData:$}=r(29),{leadersPrepareData:F}=r(428),{chartPrepareData:C}=r(146),{diagramPrepareData:D}=r(786),{activityPrepareData:B}=r(55);e.exports={prepareData:function(t,{sprintId:r}){for(let e=0;e<t.length;e+=1){var a=t[e];const l=new u(a);for(;null!==l.entities;){var i=l.entities.data;switch(i.type){case"User":d(i),l.handleProperty({property:"friends"}),i.comments&&l.handleProperty({property:"comments"}),i.commits&&l.handleProperty({property:"commits"});break;case"Comment":h(i),l.handleProperty({property:"author",type:"not array-like"}),l.handleProperty({property:"likes"});break;case"Commit":T(i),l.handleProperty({property:"author",type:"not array-like"}),l.handleProperty({property:"summaries"});break;case"Issue":i.resolvedBy&&l.handleProperty({property:"resolvedBy",type:"not array-like"}),l.handleProperty({property:"comments"});break;case"Summary":k(i),i.comments&&l.handleProperty({property:"comments"});break;case"Sprint":x(i,r);break;case"Project":l.handleProperty({property:"dependencies"}),l.handleProperty({property:"issues"}),l.handleProperty({property:"commits"});break;default:throw new Error("error: type of entity is invalid")}l.next()}}if(0===Object.keys(v).length)throw new Error("error: active sprint did not find");w({array:y,propertyForSort:"id"});var{sprintCommitsArray:e,activeCommits:o,previousCommits:n}=H(y,g),s=j(c,o);w({array:s,propertyForSort:"valueText",descending:!0});var p=S(c,f,v);w({array:p,propertyForSort:"valueText",descending:!0});var[m,n]=A({sprints:[o,n],summaries:b,commitSummaries:P}),o=M(o,v);return[F(s,v),$(p,v),C(e,s,v),D(m,n,v),B(o,v)]}}},55:e=>{e.exports={activityPrepareData:function(e,{name:t}){return{alias:"activity",data:{title:"Коммиты",subtitle:t,data:e}}}}},146:e=>{e.exports={chartPrepareData:function(t,e,{name:r}){const a=[];for(let e=0;e<t.length;e+=1){const i={title:t[e].id.toString(),hint:t[e].name,value:t[e].commits.length};t[e].active&&(i.active=!0),a.push(i)}return{alias:"chart",data:{title:"Коммиты",subtitle:r,values:a,users:e}}}}},786:(e,t,r)=>{const{getFormattedText:s}=r(329);e.exports={diagramPrepareData:function(e,t,{name:r}){var a=e=>0<e?`+${e}`:e.toString(),i=Object.values(e).reduce((e,t)=>e+t,0),o=s(i,"коммит",{one:"",twoFive:"а",other:"ов"}),n=a(i-Object.values(t).reduce((e,t)=>e+t,0)),i=["коммит",{one:"",twoFive:"а",other:"ов"}],a=[{valueText:s(e.extra,...i),differenceText:s(e.extra-t.extra,...i,{valueHandler:a})},{valueText:s(e.max,...i),differenceText:s(e.max-t.max,...i,{valueHandler:a})},{valueText:s(e.mid,...i),differenceText:s(e.mid-t.mid,...i,{valueHandler:a})},{valueText:s(e.min,...i),differenceText:s(e.min-t.min,...i,{valueHandler:a})}];return{alias:"diagram",data:{title:"Размер коммитов",subtitle:r,totalText:o,differenceText:`${n} с прошлого спринта`,categories:[{title:"> 1001 строки",valueText:a[0].valueText,differenceText:a[0].differenceText},{title:"501 — 1000 строк",valueText:a[1].valueText,differenceText:a[1].differenceText},{title:"101 — 500 строк",valueText:a[2].valueText,differenceText:a[2].differenceText},{title:"1 — 100 строк",valueText:a[3].valueText,differenceText:a[3].differenceText}]}}}}},428:e=>{e.exports={leadersPrepareData:function(e,t){return{alias:"leaders",data:{title:"Больше всего коммитов",subtitle:t.name,emoji:"👑",users:e}}}}},29:e=>{e.exports={votePrepareData:function(e,t){return{alias:"vote",data:{title:"Самый 🔎 внимательный разработчик",subtitle:t.name,emoji:"🔎",users:e}}}}}},i={},function e(t){if(i[t])return i[t].exports;var r=i[t]={exports:{}};return a[t](r,r.exports,e),r.exports}(138);var a,i});