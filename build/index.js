!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var r,a=t();for(r in a)("object"==typeof exports?exports:e)[r]=a[r]}}(this,function(){return a={372:e=>{const a=new Map;e.exports={likes:a,commentHandler:function(e){let t;if(t="object"==typeof e.author?e.author.id:e.author,e={timestamp:e.createdAt,quantity:e.likes.length},a.has(t)){const r=a.get(t);r.push(e)}else{e=[e];a.set(t,e)}}}},183:e=>{const a=[],i=new Set;e.exports={commits:a,handledCommitsId:i,commitHandler:function(e){let t;t="object"==typeof e.author?e.author.id:e.author;var r={id:e.id,author:t,timestamp:e.timestamp};i.has(e.id)||(i.add(e.id),a.push(r))}}},327:e=>{const a=[],i=new Set;var s={};e.exports={sprints:a,handledSprintsId:i,activeSprint:s,sprintHandler:function(e,t){if(void 0===t)throw new Error("error: activeSprint argument did not pass; it is necessary argument");if(!i.has(e.id)){i.add(e.id);const r={id:e.id,name:e.name,startAt:e.startAt,finishAt:e.finishAt};e.id===t&&(r.active=!0,Object.assign(s,r)),a.push(r)}}}},919:e=>{const t=new Map;var r=new Map;e.exports={summaries:t,commitSummaries:r,summaryHandler:function(e){e={id:e.id,value:e.added+e.removed},t.has(e.id)||t.set(e.id,e)}}},542:e=>{const r=new Map;e.exports={users:r,userHandler:function(e){var t={id:e.id,name:e.name,avatar:e.avatar};return r.has(e.id)||r.set(t.id,t),t.id}}},194:e=>{e.exports={binarySearchStartByProperty:function({array:e,itemProperty:t,value:r,valueProperty:a}){let i=-1,s=e.length;for(;s-i!=1;){var n=Math.round((i+s)/2);e[n][t]>r[a]?s=n:i=n}return i}}},522:e=>{e.exports={computeHeatMap:function(t){var r=["sun","mon","tue","wed","thu","fri","sat"];const a={};for(let e=0;e<r.length;e+=1){const n=[];for(let e=0;e<24;e+=1)n.push(0);a[r[e]]=n}for(let e=0;e<t.length;e+=1){var i=t[e];const o=new Date(i.timestamp);var s=o.getUTCDay(),i=o.getUTCHours();a[r[s]][i]+=1}return a}}},903:e=>{e.exports={computeStatistics:function({sprints:t,commitSummaries:r,summaries:a}){var i={min:0,mid:0,max:0,extra:0};const s=[];for(let e=0;e<t.length;e+=1){const l={...i};var n=t[e];for(let e=0;e<n.length;e+=1){var o=n[e],m=r.get(o.id);let t=0;if(m)for(let e=0;e<m.length;e+=1){var u=a.get(m[e]);t+=u.value}1001<=t?l.extra+=1:501<=t?l.max+=1:101<=t?l.mid+=1:1<=t&&(l.min+=1)}s.push(l)}return s}}},329:e=>{e.exports={getFormattedText:function(e,t,r,{valueHandler:a=null}={}){var i=Math.abs(e)%10,s=(Math.abs(e)%100-i)/10;let n;return n=a?a(e):e,1==s?`${n} ${t}${r.other}`:1==i?`${n} ${t}${r.one}`:1<i&&i<5?`${n} ${t}${r.twoFive}`:`${n} ${t}${r.other}`}}},680:e=>{e.exports={sortByProperty:function({array:e,propertyForSort:i,descending:s=!1}){e.sort((e,t)=>{var r=parseFloat(e[i]),a=parseFloat(t[i]);return r===a?s?e.id-t.id:t.id-e.id:s?a-r:r-a})}}},560:(e,t,r)=>{const{binarySearchStartByProperty:p}=r(194);e.exports={sprintCommits:function(t,r){const a=new Map;for(let e=0;e<r.length;e+=1){var i=r[e],s={id:i.id,author:i.author,timestamp:i.timestamp},i=p({array:t,itemProperty:"startAt",value:s,valueProperty:"timestamp"});if(-1!==i){i=t[i].id;if(a.has(i)){const c=a.get(i);c.push(s)}else a.set(i,[s])}}const n=[];let o,m;for(let e=0;e<t.length;e+=1){var u=t[e];const d={id:u.id,name:u.name,commits:[],startAt:u.startAt,finishAt:u.finishAt};var l=a.get(u.id);l instanceof Array&&(d.commits=l),u.active&&(d.active=!0,o=d.commits,m=0===e?[]:n[e-1].commits),n.push(d)}return{sprintCommitsArray:n,activeCommits:o,previousCommits:m}}}},155:e=>{e.exports={userCommits:function(e,t){const a=new Map;for(let e=0;e<t.length;e+=1){var{author:r}=t[e],i=a.get(r)||0;a.set(r,i+1)}const s=[];return e.forEach((e,t)=>{const r=a.get(t)||0;e={id:e.id,name:e.name,avatar:e.avatar,valueText:r.toString()};s.push(e)}),s}}},422:(e,t,r)=>{const{getFormattedText:c}=r(329);e.exports={userLikes:function(e,o,{startAt:m,finishAt:u}){const l=[];return e.forEach((e,t)=>{const r={...e};var a=o.get(t);let i=0;if(a)for(let e=0;e<a.length;e+=1){var{timestamp:s,quantity:n}=a[e];m<=s&&s<=u&&(i+=n)}r.valueText=c(i,"голос",{one:"",twoFive:"а",other:"ов"}),l.push(r)}),l}}},138:(e,t,r)=>{const{users:g,userHandler:T}=r(542),{likes:b,commentHandler:S}=r(372),{sprints:w,activeSprint:P,sprintHandler:H}=r(327),{commits:j,commitHandler:k}=r(183),{summaries:A,commitSummaries:C,summaryHandler:$}=r(919),{userLikes:D}=r(422),{sortByProperty:F}=r(680),{sprintCommits:M}=r(560),{userCommits:B}=r(155),{computeStatistics:E}=r(903),{computeHeatMap:I}=r(522),{votePrepareData:O}=r(29),{leadersPrepareData:U}=r(428),{chartPrepareData:q}=r(146),{diagramPrepareData:L}=r(786),{activityPrepareData:z}=r(55);e.exports={prepareData:function(a,{sprintId:i}){const s=new Map;let n=0,o;for(let t=0;t<a.length;t+=1){let e={data:a[t],next:null},r=e;for(;null!==e;){var m=e.data;switch(m.type){case"User":o=T(m),s.has(o)||s.set(o,n);break;case"Comment":S(m);break;case"Commit":k(m);break;case"Issue":break;case"Summary":$(m);break;case"Sprint":H(m,i);break;case"Project":break;default:throw new Error("error: type of entity is invalid")}var u=["friends","comments","commits","issues","dependencies","likes","summaries"];for(let e=0;e<u.length;e+=1){var l,c=u[e];if(m[c])for(let t=0;t<m[c].length;t+=1){if("object"==typeof m[c][t]&&(l={data:m[c][t],next:null},r.next=l,r=l),"summaries"===c){let e=m[c][t];if("object"==typeof e&&(e=e.id),C.has(m.id)){const y=C.get(m.id);y.push(e)}else C.set(m.id,[e])}"friends"!==c&&"likes"!==c||(o="object"==typeof m[c][t]?m[c][t].id:m[c][t],s.has(o)||(s.set(o,n),n+=1))}}var d=["author","resolvedBy"];for(let e=0;e<d.length;e+=1){var p,f=d[e];m[f]&&(o="object"==typeof m[f]?(p={data:m[f],next:null},r.next=p,r=p,m[f].id):m[f],s.has(o)||(s.set(o,n),n+=1))}e=e.next}}if(0===Object.keys(P).length)throw new Error("error: active sprint did not find");F({array:w,propertyForSort:"id"});var{sprintCommitsArray:e,activeCommits:t,previousCommits:r}=M(w,j),v=B(g,t);F({array:v,propertyForSort:"valueText",descending:!0});var h=D(g,b,P);F({array:h,propertyForSort:"valueText",descending:!0});var[x,r]=E({sprints:[t,r],summaries:A,commitSummaries:C}),t=I(t);return[U(v,P),O(h,P),q(e,v,P),L(x,r,P),z(t,P)]}}},55:e=>{e.exports={activityPrepareData:function(e,{name:t}){return{alias:"activity",data:{title:"Коммиты",subtitle:t,data:e}}}}},146:e=>{e.exports={chartPrepareData:function(t,e,{name:r}){const a=[];for(let e=0;e<t.length;e+=1){const i={title:t[e].id.toString(),hint:t[e].name,value:t[e].commits.length};t[e].active&&(i.active=!0),a.push(i)}return{alias:"chart",data:{title:"Коммиты",subtitle:r,values:a,users:e}}}}},786:(e,t,r)=>{const{getFormattedText:o}=r(329);e.exports={diagramPrepareData:function(e,t,{name:r}){var a=e=>0<e?`+${e}`:e.toString(),i=Object.values(e).reduce((e,t)=>e+t,0),s=o(i,"коммит",{one:"",twoFive:"а",other:"ов"}),n=a(i-Object.values(t).reduce((e,t)=>e+t,0)),i=["коммит",{one:"",twoFive:"а",other:"ов"}],a=[{valueText:o(e.extra,...i),differenceText:o(e.extra-t.extra,...i,{valueHandler:a})},{valueText:o(e.max,...i),differenceText:o(e.max-t.max,...i,{valueHandler:a})},{valueText:o(e.mid,...i),differenceText:o(e.mid-t.mid,...i,{valueHandler:a})},{valueText:o(e.min,...i),differenceText:o(e.min-t.min,...i,{valueHandler:a})}];return{alias:"diagram",data:{title:"Размер коммитов",subtitle:r,totalText:s,differenceText:`${n} с прошлого спринта`,categories:[{title:"> 1001 строки",valueText:a[0].valueText,differenceText:a[0].differenceText},{title:"501 — 1000 строк",valueText:a[1].valueText,differenceText:a[1].differenceText},{title:"101 — 500 строк",valueText:a[2].valueText,differenceText:a[2].differenceText},{title:"1 — 100 строк",valueText:a[3].valueText,differenceText:a[3].differenceText}]}}}}},428:e=>{e.exports={leadersPrepareData:function(e,t){return{alias:"leaders",data:{title:"Больше всего коммитов",subtitle:t.name,emoji:"👑",users:e}}}}},29:e=>{e.exports={votePrepareData:function(e,t){return{alias:"vote",data:{title:"Самый 🔎 внимательный разработчик",subtitle:t.name,emoji:"🔎",users:e}}}}}},i={},function e(t){if(i[t])return i[t].exports;var r=i[t]={exports:{}};return a[t](r,r.exports,e),r.exports}(138);var a,i});