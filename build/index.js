!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var r,a=e();for(r in a)("object"==typeof exports?exports:t)[r]=a[r]}}(this,function(){return a={372:t=>{const a=new Map;t.exports={likes:a,commentHandler:function(t){let e;e="object"==typeof t.author?t.author.id:t.author,t={timestamp:t.createdAt,quantity:t.likes.length};const r=a.get(e);void 0!==r?r.push(t):a.set(e,[t])}}},183:t=>{const i=[],s=new Map;t.exports={commits:i,commitSummaries:s,commitHandler:function(r){let t;t="object"==typeof r.author?r.author.id:r.author;var e={id:r.id,author:t,timestamp:r.timestamp};i.push(e);const a=[],o=new Set;for(let e=0;e<r.summaries.length;e+=1){let t;t="object"==typeof r.summaries[e]?r.summaries[e].id:r.summaries[e],o.has(t)||(a.push(t),o.add(t))}s.set(r.id,a)}}},327:t=>{const a=[],o={};t.exports={sprints:a,activeSprint:o,sprintHandler:function(t,e){if(void 0===e)throw new Error("error: activeSprint argument did not pass; it is necessary argument");const r={id:t.id,name:t.name,startAt:t.startAt,finishAt:t.finishAt};t.id===e&&(r.active=!0,o.data=r),a.push(r)}}},919:t=>{const e=new Map;t.exports={summaries:e,summaryHandler:function(t){t={id:t.id,value:t.added+t.removed},e.set(t.id,t)}}},542:t=>{const e=new Map;t.exports={users:e,userHandler:function(t){t={id:t.id,name:t.name,avatar:t.avatar},e.set(t.id,t)}}},194:t=>{t.exports={binarySearchStartByProperty:function({array:t,itemProperty:e,value:r,valueProperty:a}){let o=-1,i=t.length;for(;i-o!=1;){var s=Math.floor((o+i)/2);Math.floor(1e4*t[s][e])>Math.floor(1e4*r[a])?i=s:o=s}return o}}},522:t=>{t.exports={computeHeatMap:function(e){var r=["sun","mon","tue","wed","thu","fri","sat"];const a={};for(let t=0;t<r.length;t+=1){const s=[];for(let t=0;t<24;t+=1)s.push(0);a[r[t]]=s}for(let t=0;t<e.length;t+=1){var o=e[t];const n=new Date(o.timestamp);var i=n.getDay(),o=n.getHours();a[r[i]][o]+=1}return a}}},903:t=>{t.exports={computeStatistics:function({sprints:e,commitSummaries:r,summaries:a}){var o={min:0,mid:0,max:0,extra:0};const i=[];for(let t=0;t<e.length;t+=1){const m={...o};var s=e[t];for(let t=0;t<s.length;t+=1){var n=s[t],p=r.get(n.id);let e=0;if(p)for(let t=0;t<p.length;t+=1){var l=a.get(p[t]);e+=l.value}1001<=e?m.extra+=1:501<=e?m.max+=1:101<=e?m.mid+=1:1<=e&&(m.min+=1)}i.push(m)}return i}}},329:t=>{t.exports={getFormattedText:function(t,e,r,{valueHandler:a=null}={}){var o=Math.abs(t)%10,i=(Math.abs(t)%100-o)/10;let s;return s=a?a(t):t,1==i?`${s} ${e}${r.other}`:1==o?`${s} ${e}${r.one}`:1<o&&o<5?`${s} ${e}${r.twoFive}`:`${s} ${e}${r.other}`}}},680:t=>{t.exports={sortByProperty:function({array:t,propertyForSort:o,descending:i=!1}){t.sort((t,e)=>{var r=parseFloat(t[o]),a=parseFloat(e[o]);return r===a?i?t.id-e.id:e.id-t.id:i?a-r:r-a})}}},560:(t,e,r)=>{const{binarySearchStartByProperty:c}=r(194);t.exports={sprintCommits:function(e,r){const a=new Map;var o={startAt:e[e.length-1].finishAt};for(let t=0;t<r.length;t+=1){var i={...r[t]},s=c({array:[...e,o],itemProperty:"startAt",value:i,valueProperty:"timestamp"});if(-1!==s&&s!==e.length){s=e[s].id;const d=a.get(s);void 0!==d?d.push(i):a.set(s,[i])}}const n=[];let p,l;for(let t=0;t<e.length;t+=1){const u={...e[t]};var m=a.get(u.id);Array.isArray(m)?u.commits=m:u.commits=[],u.active&&(p=u.commits,l=0===t?[]:n[t-1].commits),n.push(u)}return{sprintCommitsArray:n,activeCommits:p,previousCommits:l}}}},155:t=>{t.exports={userCommits:function(t,e){const a=new Map;for(let t=0;t<e.length;t+=1){var{author:r}=e[t],o=a.get(r)||0;a.set(r,o+1)}const i=[];return t.forEach((t,e)=>{const r=a.get(e)||0;t={id:t.id,name:t.name,avatar:t.avatar,valueText:r.toString()};i.push(t)}),i}}},422:(t,e,r)=>{const{getFormattedText:d}=r(329);t.exports={userLikes:function(t,n,{startAt:p,finishAt:l}){const m=[];return t.forEach((t,e)=>{const r={...t};var a=n.get(e);let o=0;if(a)for(let t=0;t<a.length;t+=1){var{timestamp:i,quantity:s}=a[t];Math.floor(1e4*i)>=Math.floor(1e4*p)&&Math.floor(1e4*i)<Math.floor(1e4*l)&&(o+=s)}r.valueText=d(o,"голос",{one:"",twoFive:"а",other:"ов"}),m.push(r)}),m}}},754:t=>{class e{constructor(t){this.entities={data:t,next:null},this.tail=this.entities}next(){this.entities=this.entities.next}add(t){t={data:t,next:null};this.tail.next=t,this.tail=t}handleProperty({property:e,type:t="array-like"}){var{data:r}=this.entities;if("array-like"===t)for(let t=0;t<r[e].length;t+=1)"object"==typeof r[e][t]&&this.add(r[e][t]);else{if("not array-like"!==t)throw new Error("error: invalid type. type can be 'array-like' or 'not array-like'");"object"==typeof r[e]&&this.add(r[e])}}}t.exports={LinkedList:e}},825:t=>{class e{constructor(e){this.storage={},this.typesSet=new Set;for(let t=0;t<e.length;t+=1){var r=e[t];this.storage[r]=new Set,this.typesSet.add(r)}}add(t,e){if(this.typesSet.has(t)){var r=this.has(t,e);return this.storage[t].add(e),!r}return!1}has(t,e){return!!this.typesSet.has(t)&&this.storage[t].has(e)}}t.exports={UniquenessStorage:e}},138:(t,e,r)=>{const{LinkedList:f}=r(754),{UniquenessStorage:y}=r(825),{users:v,userHandler:x}=r(542),{likes:g,commentHandler:P}=r(372),{sprints:S,activeSprint:T,sprintHandler:w}=r(327),{commits:b,commitSummaries:k,commitHandler:H}=r(183),{summaries:M,summaryHandler:A}=r(919),{userLikes:C}=r(422),{sortByProperty:F}=r(680),{sprintCommits:$}=r(560),{userCommits:D}=r(155),{computeStatistics:j}=r(903),{computeHeatMap:B}=r(522),{votePrepareData:E}=r(29),{leadersPrepareData:L}=r(428),{chartPrepareData:q}=r(146),{diagramPrepareData:U}=r(786),{activityPrepareData:I}=r(55);t.exports={prepareData:function(e,{sprintId:r}){const a=new y(["Project","User","Issue","Comment","Commit","Summary","Sprint"]);for(let t=0;t<e.length;t+=1){var o=e[t];const h=new f(o);for(;null!==h.entities;){var i=h.entities.data,{type:s}=i;if(!a.has(s,i.id)){switch(s){case"User":x(i),h.handleProperty({property:"friends"}),i.comments&&h.handleProperty({property:"comments"}),i.commits&&h.handleProperty({property:"commits"});break;case"Comment":P(i),h.handleProperty({property:"author",type:"not array-like"}),h.handleProperty({property:"likes"});break;case"Commit":H(i),h.handleProperty({property:"author",type:"not array-like"}),h.handleProperty({property:"summaries"});break;case"Issue":i.resolvedBy&&h.handleProperty({property:"resolvedBy",type:"not array-like"}),h.handleProperty({property:"comments"});break;case"Summary":A(i),i.comments&&h.handleProperty({property:"comments"});break;case"Sprint":w(i,r);break;case"Project":h.handleProperty({property:"dependencies"}),h.handleProperty({property:"issues"}),h.handleProperty({property:"commits"});break;default:throw new Error("error: type of entity is invalid")}a.add(s,i.id)}h.next()}}if(void 0===T.data)throw new Error("error: active sprint did not find");F({array:S,propertyForSort:"id"});var{sprintCommitsArray:t,activeCommits:n,previousCommits:p}=$(S,b),l=D(v,n);F({array:l,propertyForSort:"valueText",descending:!0});var m=C(v,g,T.data);F({array:m,propertyForSort:"valueText",descending:!0});var[d,u]=j({sprints:[n,p],summaries:M,commitSummaries:k}),c=B(n);return[L(l,T.data),E(m,T.data),q(t,l,T.data),U(d,u,T.data,n.length,p.length),I(c,T.data)]}}},55:t=>{t.exports={activityPrepareData:function(t,{name:e}){return{alias:"activity",data:{title:"Коммиты",subtitle:e,data:t}}}}},146:(t,e,r)=>{const{sortByProperty:i}=r(680);t.exports={chartPrepareData:function(e,t,{name:r}){const a=[];for(let t=0;t<e.length;t+=1){const o={title:e[t].id.toString(),hint:e[t].name,value:e[t].commits.length};e[t].active&&(o.active=!0),a.push(o)}return i({array:a,propertyForSort:"title"}),{alias:"chart",data:{title:"Коммиты",subtitle:r,values:a,users:t}}}}},786:(t,e,r)=>{const{getFormattedText:n}=r(329);t.exports={diagramPrepareData:function(t,e,{name:r},a,o){var i=t=>0<t?`+${t}`:t.toString(),s=n(a,"коммит",{one:"",twoFive:"а",other:"ов"}),a=i(a-o),o=["коммит",{one:"",twoFive:"а",other:"ов"}],i=[{valueText:n(t.extra,...o),differenceText:n(t.extra-e.extra,...o,{valueHandler:i})},{valueText:n(t.max,...o),differenceText:n(t.max-e.max,...o,{valueHandler:i})},{valueText:n(t.mid,...o),differenceText:n(t.mid-e.mid,...o,{valueHandler:i})},{valueText:n(t.min,...o),differenceText:n(t.min-e.min,...o,{valueHandler:i})}];return{alias:"diagram",data:{title:"Размер коммитов",subtitle:r,totalText:s,differenceText:`${a} с прошлого спринта`,categories:[{title:"> 1001 строки",valueText:i[0].valueText,differenceText:i[0].differenceText},{title:"501 — 1000 строк",valueText:i[1].valueText,differenceText:i[1].differenceText},{title:"101 — 500 строк",valueText:i[2].valueText,differenceText:i[2].differenceText},{title:"1 — 100 строк",valueText:i[3].valueText,differenceText:i[3].differenceText}]}}}}},428:t=>{t.exports={leadersPrepareData:function(t,{name:e}){return{alias:"leaders",data:{title:"Больше всего коммитов",subtitle:e,emoji:"👑",users:t}}}}},29:t=>{t.exports={votePrepareData:function(t,{name:e}){return{alias:"vote",data:{title:"Самый 🔎 внимательный разработчик",subtitle:e,emoji:"🔎",users:t}}}}}},o={},function t(e){if(o[e])return o[e].exports;var r=o[e]={exports:{}};return a[e](r,r.exports,t),r.exports}(138);var a,o});