!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var r,a=e();for(r in a)("object"==typeof exports?exports:t)[r]=a[r]}}(this,function(){return a={372:t=>{t.exports={commentHandler:function(t,e){let r;r="object"==typeof t.author?t.author.id:t.author,t={timestamp:t.createdAt,quantity:t.likes.length};const a=e.get(r);void 0!==a?a.push(t):e.set(r,[t])}}},183:t=>{t.exports={commitHandler:function(r,t,e){let a;a="object"==typeof r.author?r.author.id:r.author;var i={id:r.id,author:a,timestamp:r.timestamp};t.push(i);const s=[],o=new Set;for(let e=0;e<r.summaries.length;e+=1){let t;t="object"==typeof r.summaries[e]?r.summaries[e].id:r.summaries[e],o.has(t)||(s.push(t),o.add(t))}e.set(r.id,s)}}},327:t=>{t.exports={sprintHandler:function(t,e,r,a){if(void 0===e)throw new Error("error: activeSprint argument did not pass; it is necessary argument");const i={id:t.id,name:t.name,startAt:t.startAt,finishAt:t.finishAt};t.id===e&&(i.active=!0,Object.assign(a,{data:i})),r.push(i)}}},919:t=>{t.exports={summaryHandler:function(t,e){t={id:t.id,value:Math.abs(t.added)+Math.abs(t.removed)},e.set(t.id,t)}}},542:t=>{t.exports={userHandler:function(t,e){t={id:t.id,name:t.name,avatar:t.avatar},e.set(t.id,t)}}},194:t=>{t.exports={binarySearchStartByProperty:function({array:t,itemProperty:e,value:r,valueProperty:a}){let i=-1,s=t.length;for(;s-i!=1;){var o=Math.floor((i+s)/2);Math.floor(1e4*t[o][e])>Math.floor(1e4*r[a])?s=o:i=o}return i}}},522:t=>{t.exports={computeHeatMap:function(e){var r=["sun","mon","tue","wed","thu","fri","sat"];const a={};for(let t=0;t<r.length;t+=1){const o=[];for(let t=0;t<24;t+=1)o.push(0);a[r[t]]=o}for(let t=0;t<e.length;t+=1){var i=e[t];const n=new Date(i.timestamp);var s=n.getDay(),i=n.getHours();a[r[s]][i]+=1}return a}}},903:t=>{t.exports={computeStatistics:function({sprints:e,commitSummaries:r,summaries:a}){var i={min:0,mid:0,max:0,extra:0};const s=[];for(let t=0;t<e.length;t+=1){const l={...i};var o=e[t];for(let t=0;t<o.length;t+=1){var n=o[t],p=r.get(n.id);let e=0;if(p)for(let t=0;t<p.length;t+=1){var m=a.get(p[t]);e+=m.value}1001<=e?l.extra+=1:501<=e?l.max+=1:101<=e?l.mid+=1:1<=e&&(l.min+=1)}s.push(l)}return s}}},329:t=>{t.exports={getFormattedText:function(t,e,r,{valueHandler:a=null}={}){var i=Math.abs(t)%10,s=(Math.abs(t)%100-i)/10;let o;return o=a?a(t):t,1==s?`${o} ${e}${r.other}`:1==i?`${o} ${e}${r.one}`:1<i&&i<5?`${o} ${e}${r.twoFive}`:`${o} ${e}${r.other}`}}},680:t=>{t.exports={sortByProperty:function({array:t,propertyForSort:i,descending:s=!1,withParse:o=!0}){t.sort((t,e)=>{let r,a;return a=o?(r=parseFloat(t[i]),parseFloat(e[i])):(r=t[i],e[i]),r===a?s?t.id-e.id:e.id-t.id:o?s?a-r:r-a:s?2*(a>r)-1:2*(r>a)-1})}}},560:(t,e,r)=>{const{binarySearchStartByProperty:h}=r(194);t.exports={sprintCommits:function(e,r){const a=new Map;var i={startAt:e[e.length-1].finishAt};for(let t=0;t<r.length;t+=1){var s={...r[t]},o=h({array:[...e,i],itemProperty:"startAt",value:s,valueProperty:"timestamp"});if(-1!==o&&o!==e.length){o=e[o].id;const d=a.get(o);void 0!==d?d.push(s):a.set(o,[s])}}const n=[];let p,m;for(let t=0;t<e.length;t+=1){var l=e[t];const c={sprint:l,commits:[]};var u=a.get(l.id);Array.isArray(u)&&(c.commits=u),l.active&&(p=c.commits,m=0===t?[]:n[t-1].commits),n.push(c)}return{sprintCommitsArray:n,activeCommits:p,previousCommits:m}}}},155:t=>{t.exports={userCommits:function(t,e){const a=new Map;for(let t=0;t<e.length;t+=1){var{author:r}=e[t],i=a.get(r)||0;a.set(r,i+1)}const s=[];return t.forEach((t,e)=>{const r=a.get(e);r&&(t={id:t.id,name:t.name,avatar:t.avatar,valueText:r.toString()},s.push(t))}),s}}},629:(t,e,r)=>{const{getFormattedText:u}=r(329);t.exports={userLikes:function(t,n,{startAt:p,finishAt:m}){const l=[];return t.forEach((t,e)=>{const r={...t};var a=n.get(e);let i=0;if(a)for(let t=0;t<a.length;t+=1){var{timestamp:s,quantity:o}=a[t];Math.floor(1e4*s)>=Math.floor(1e4*p)&&Math.floor(1e4*s)<Math.floor(1e4*m)&&(i+=o)}r.valueText=u(i,"голос",{one:"",twoFive:"а",other:"ов"}),l.push(r)}),l}}},754:t=>{class e{constructor(t){this.entities={data:t,next:null},this.tail=this.entities}next(){this.entities=this.entities.next}add(t){t={data:t,next:null};this.tail.next=t,this.tail=t}handleProperty({property:e,type:t="array-like"}){var{data:r}=this.entities;if("array-like"===t)for(let t=0;t<r[e].length;t+=1)"object"==typeof r[e][t]&&this.add(r[e][t]);else{if("not array-like"!==t)throw new Error("error: invalid type. type can be 'array-like' or 'not array-like'");"object"==typeof r[e]&&this.add(r[e])}}}t.exports={LinkedList:e}},422:t=>{class e{constructor(){this.initStorage()}initStorage(){this.users=new Map,this.likes=new Map,this.sprints=[],this.activeSprint={},this.commits=[],this.commitSummaries=new Map,this.summaries=new Map}}t.exports={Storage:e}},825:t=>{class e{constructor(e){this.storage={},this.typesSet=new Set;for(let t=0;t<e.length;t+=1){var r=e[t];this.storage[r]=new Set,this.typesSet.add(r)}}add(t,e){if(this.typesSet.has(t)){var r=this.has(t,e);return this.storage[t].add(e),!r}return!1}has(t,e){return!!this.typesSet.has(t)&&this.storage[t].has(e)}}t.exports={UniquenessStorage:e}},138:(t,e,r)=>{const{LinkedList:v}=r(754),{UniquenessStorage:y}=r(825),{Storage:x}=r(422),{userHandler:g}=r(542),{commentHandler:S}=r(372),{commitHandler:P}=r(183),{sprintHandler:T}=r(327),{summaryHandler:b}=r(919),{userLikes:w}=r(629),{sortByProperty:k}=r(680),{sprintCommits:M}=r(560),{userCommits:H}=r(155),{computeStatistics:A}=r(903),{computeHeatMap:C}=r(522),{votePrepareData:$}=r(29),{leadersPrepareData:j}=r(428),{chartPrepareData:D}=r(146),{diagramPrepareData:F}=r(786),{activityPrepareData:B}=r(55);t.exports={prepareData:function(e,{sprintId:r}){var a=new x;const i=new y(["Project","User","Issue","Comment","Commit","Summary","Sprint"]);for(let t=0;t<e.length;t+=1){var s=e[t];const f=new v(s);for(;null!==f.entities;){var o=f.entities.data,{type:n}=o;if(!i.has(n,o.id))switch(n){case"User":g(o,a.users),f.handleProperty({property:"friends"}),o.comments&&f.handleProperty({property:"comments"}),o.commits&&f.handleProperty({property:"commits"});break;case"Comment":S(o,a.likes),f.handleProperty({property:"author",type:"not array-like"}),f.handleProperty({property:"likes"});break;case"Commit":P(o,a.commits,a.commitSummaries),f.handleProperty({property:"author",type:"not array-like"}),f.handleProperty({property:"summaries"});break;case"Issue":o.resolvedBy&&f.handleProperty({property:"resolvedBy",type:"not array-like"}),f.handleProperty({property:"comments"});break;case"Summary":b(o,a.summaries),o.comments&&f.handleProperty({property:"comments"});break;case"Sprint":T(o,r,a.sprints,a.activeSprint);break;case"Project":f.handleProperty({property:"dependencies"}),f.handleProperty({property:"issues"}),f.handleProperty({property:"commits"});break;default:throw new Error("error: type of entity is invalid")}i.add(n,o.id),f.next()}}if(void 0===a.activeSprint.data)throw new Error("error: active sprint did not find");k({array:a.sprints,propertyForSort:"id"});var{sprintCommitsArray:t,activeCommits:p,previousCommits:m}=M(a.sprints,a.commits),l=H(a.users,p);k({array:l,propertyForSort:"valueText",descending:!0});var u=w(a.users,a.likes,a.activeSprint.data);k({array:u,propertyForSort:"valueText",descending:!0});var[d,c]=A({sprints:[p,m],summaries:a.summaries,commitSummaries:a.commitSummaries}),h=C(p);return[j(l,a.activeSprint.data),$(u,a.activeSprint.data),D(t,l,a.activeSprint.data),F(d,c,a.activeSprint.data,p.length,m.length),B(h,a.activeSprint.data)]}}},55:t=>{t.exports={activityPrepareData:function(t,{name:e}){return{alias:"activity",data:{title:"Коммиты",subtitle:e,data:t}}}}},146:t=>{t.exports={chartPrepareData:function(e,t,{name:r}){const a=[];for(let t=0;t<e.length;t+=1){const i=e[t],s={title:i.sprint.id.toString(),hint:i.sprint.name,value:i.commits.length};i.sprint.active&&(s.active=!0),a.push(s)}return{alias:"chart",data:{title:"Коммиты",subtitle:r,values:a,users:t}}}}},786:(t,e,r)=>{const{getFormattedText:o}=r(329);var n=["коммит",{one:"",twoFive:"а",other:"ов"}],p=t=>0<t?`+${t}`:t.toString();t.exports={diagramPrepareData:function(t,e,{name:r},a,i){var s=o(a,"коммит",{one:"",twoFive:"а",other:"ов"}),i=p(a-i),e=[{valueText:o(t.extra,...n),differenceText:o(t.extra-e.extra,...n,{valueHandler:p})},{valueText:o(t.max,...n),differenceText:o(t.max-e.max,...n,{valueHandler:p})},{valueText:o(t.mid,...n),differenceText:o(t.mid-e.mid,...n,{valueHandler:p})},{valueText:o(t.min,...n),differenceText:o(t.min-e.min,...n,{valueHandler:p})}];return{alias:"diagram",data:{title:"Размер коммитов",subtitle:r,totalText:s,differenceText:`${i} с прошлого спринта`,categories:[{title:"> 1001 строки",valueText:e[0].valueText,differenceText:e[0].differenceText},{title:"501 — 1000 строк",valueText:e[1].valueText,differenceText:e[1].differenceText},{title:"101 — 500 строк",valueText:e[2].valueText,differenceText:e[2].differenceText},{title:"1 — 100 строк",valueText:e[3].valueText,differenceText:e[3].differenceText}]}}}}},428:t=>{t.exports={leadersPrepareData:function(t,{name:e}){return{alias:"leaders",data:{title:"Больше всего коммитов",subtitle:e,emoji:"👑",users:t}}}}},29:t=>{t.exports={votePrepareData:function(t,{name:e}){return{alias:"vote",data:{title:"Самый 🔎 внимательный разработчик",subtitle:e,emoji:"🔎",users:t}}}}}},i={},function t(e){if(i[e])return i[e].exports;var r=i[e]={exports:{}};return a[e](r,r.exports,t),r.exports}(138);var a,i});