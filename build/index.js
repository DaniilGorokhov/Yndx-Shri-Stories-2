!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var r,a=t();for(r in a)("object"==typeof exports?exports:e)[r]=a[r]}}(this,function(){return a={372:e=>{const a=new Map;e.exports={likes:a,commentHandler:function(e){let t;t="object"==typeof e.author?e.author.id:e.author,e={timestamp:e.createdAt,quantity:e.likes.length};const r=a.get(t);void 0!==r?r.push(e):a.set(t,[e])}}},183:e=>{const o=[],i=new Map;e.exports={commits:o,commitSummaries:i,commitHandler:function(r){let e;e="object"==typeof r.author?r.author.id:r.author;var t={id:r.id,author:e,timestamp:r.timestamp};o.push(t);const a=[];for(let t=0;t<r.summaries.length;t+=1){let e;e="object"==typeof r.summaries[t]?r.summaries[t].id:r.summaries[t],a.push(e)}i.set(r.id,a)}}},327:e=>{const a=[],o={};e.exports={sprints:a,activeSprint:o,sprintHandler:function(e,t){if(void 0===t)throw new Error("error: activeSprint argument did not pass; it is necessary argument");const r={id:e.id,name:e.name,startAt:e.startAt,finishAt:e.finishAt};e.id===t&&(r.active=!0,o.data=r),a.push(r)}}},919:e=>{const t=new Map;var r=new Map;e.exports={summaries:t,commitSummaries:r,summaryHandler:function(e){e={id:e.id,value:e.added+e.removed},t.set(e.id,e)}}},542:e=>{const t=new Map;e.exports={users:t,userHandler:function(e){e={id:e.id,name:e.name,avatar:e.avatar},t.set(e.id,e)}}},194:e=>{e.exports={binarySearchStartByProperty:function({array:e,itemProperty:t,value:r,valueProperty:a}){let o=-1,i=e.length;for(;i-o!=1;){var n=Math.floor((o+i)/2);Math.floor(1e4*e[n][t])>Math.floor(1e4*r[a])?i=n:o=n}return o}}},522:e=>{e.exports={computeHeatMap:function(t){var r=["sun","mon","tue","wed","thu","fri","sat"];const a={};for(let e=0;e<r.length;e+=1){const n=[];for(let e=0;e<24;e+=1)n.push(0);a[r[e]]=n}for(let e=0;e<t.length;e+=1){var o=t[e];const s=new Date(o.timestamp);var i=s.getDay(),o=s.getHours();a[r[i]][o]+=1}return a}}},903:e=>{e.exports={computeStatistics:function({sprints:t,commitSummaries:r,summaries:a}){var o={min:0,mid:0,max:0,extra:0};const i=[];for(let e=0;e<t.length;e+=1){const m={...o};var n=t[e];for(let e=0;e<n.length;e+=1){var s=n[e],p=r.get(s.id);let t=0;if(p)for(let e=0;e<p.length;e+=1){var l=a.get(p[e]);t+=l.value}1001<=t?m.extra+=1:501<=t?m.max+=1:101<=t?m.mid+=1:1<=t&&(m.min+=1)}i.push(m)}return i}}},329:e=>{e.exports={getFormattedText:function(e,t,r,{valueHandler:a=null}={}){var o=Math.abs(e)%10,i=(Math.abs(e)%100-o)/10;let n;return n=a?a(e):e,1==i?`${n} ${t}${r.other}`:1==o?`${n} ${t}${r.one}`:1<o&&o<5?`${n} ${t}${r.twoFive}`:`${n} ${t}${r.other}`}}},680:e=>{e.exports={sortByProperty:function({array:e,propertyForSort:o,descending:i=!1}){e.sort((e,t)=>{var r=parseFloat(e[o]),a=parseFloat(t[o]);return r===a?i?e.id-t.id:t.id-e.id:i?a-r:r-a})}}},560:(e,t,r)=>{const{binarySearchStartByProperty:d}=r(194);e.exports={sprintCommits:function(t,r){const a=new Map;var o={startAt:t[t.length-1].finishAt};for(let e=0;e<r.length;e+=1){var i={...r[e]},n=d({array:[...t,o],itemProperty:"startAt",value:i,valueProperty:"timestamp"});if(-1!==n&&n!==t.length){n=t[n].id;const u=a.get(n);void 0!==u?u.push(i):a.set(n,[i])}}const s=[];let p,l;for(let e=0;e<t.length;e+=1){const c={...t[e]};var m=a.get(c.id);Array.isArray(m)?c.commits=m:c.commits=[],c.active&&(p=c.commits,l=0===e?[]:s[e-1].commits),s.push(c)}return{sprintCommitsArray:s,activeCommits:p,previousCommits:l}}}},155:e=>{e.exports={userCommits:function(e,t){const a=new Map;for(let e=0;e<t.length;e+=1){var{author:r}=t[e],o=a.get(r)||0;a.set(r,o+1)}const i=[];return e.forEach((e,t)=>{const r=a.get(t)||0;e={id:e.id,name:e.name,avatar:e.avatar,valueText:r.toString()};i.push(e)}),i}}},422:(e,t,r)=>{const{getFormattedText:u}=r(329);e.exports={userLikes:function(e,s,{startAt:p,finishAt:l}){const m=[];return e.forEach((e,t)=>{const r={...e};var a=s.get(t);let o=0;if(a)for(let e=0;e<a.length;e+=1){var{timestamp:i,quantity:n}=a[e];Math.floor(1e4*i)>=Math.floor(1e4*p)&&Math.floor(1e4*i)<Math.floor(1e4*l)&&(o+=n)}r.valueText=u(o,"голос",{one:"",twoFive:"а",other:"ов"}),m.push(r)}),m}}},754:e=>{class t{constructor(e){this.entities={data:e,next:null},this.tail=this.entities}next(){this.entities=this.entities.next}add(e){e={data:e,next:null};this.tail.next=e,this.tail=e}handleProperty({property:t,type:e="array-like"}){var{data:r}=this.entities;if("array-like"===e)for(let e=0;e<r[t].length;e+=1)"object"==typeof r[t][e]&&this.add(r[t][e]);else{if("not array-like"!==e)throw new Error("error: invalid type. type can be 'array-like' or 'not array-like'");"object"==typeof r[t]&&this.add(r[t])}}}e.exports={LinkedList:t}},138:(e,t,r)=>{const{LinkedList:u}=r(754),{users:c,userHandler:d}=r(542),{likes:f,commentHandler:y}=r(372),{sprints:h,activeSprint:v,sprintHandler:x}=r(327),{commits:g,commitSummaries:P,commitHandler:T}=r(183),{summaries:b,summaryHandler:S}=r(919),{userLikes:k}=r(422),{sortByProperty:w}=r(680),{sprintCommits:H}=r(560),{userCommits:M}=r(155),{computeStatistics:A}=r(903),{computeHeatMap:F}=r(522),{votePrepareData:$}=r(29),{leadersPrepareData:j}=r(428),{chartPrepareData:D}=r(146),{diagramPrepareData:C}=r(786),{activityPrepareData:B}=r(55);e.exports={prepareData:function(t,{sprintId:r}){for(let e=0;e<t.length;e+=1){var a=t[e];const m=new u(a);for(;null!==m.entities;){var o=m.entities.data;switch(o.type){case"User":d(o),m.handleProperty({property:"friends"}),o.comments&&m.handleProperty({property:"comments"}),o.commits&&m.handleProperty({property:"commits"});break;case"Comment":y(o),m.handleProperty({property:"author",type:"not array-like"}),m.handleProperty({property:"likes"});break;case"Commit":T(o),m.handleProperty({property:"author",type:"not array-like"}),m.handleProperty({property:"summaries"});break;case"Issue":o.resolvedBy&&m.handleProperty({property:"resolvedBy",type:"not array-like"}),m.handleProperty({property:"comments"});break;case"Summary":S(o),o.comments&&m.handleProperty({property:"comments"});break;case"Sprint":x(o,r);break;case"Project":m.handleProperty({property:"dependencies"}),m.handleProperty({property:"issues"}),m.handleProperty({property:"commits"});break;default:throw new Error("error: type of entity is invalid")}m.next()}}if(void 0===v.data)throw new Error("error: active sprint did not find");w({array:h,propertyForSort:"id"});var{sprintCommitsArray:e,activeCommits:i,previousCommits:n}=H(h,g),s=M(c,i);w({array:s,propertyForSort:"valueText",descending:!0});var p=k(c,f,v.data);w({array:p,propertyForSort:"valueText",descending:!0});var[l,n]=A({sprints:[i,n],summaries:b,commitSummaries:P}),i=F(i);return[j(s,v.data),$(p,v.data),D(e,s,v.data),C(l,n,v.data),B(i,v.data)]}}},55:e=>{e.exports={activityPrepareData:function(e,{name:t}){return{alias:"activity",data:{title:"Коммиты",subtitle:t,data:e}}}}},146:(e,t,r)=>{const{sortByProperty:i}=r(680);e.exports={chartPrepareData:function(t,e,{name:r}){const a=[];for(let e=0;e<t.length;e+=1){const o={title:t[e].id.toString(),hint:t[e].name,value:t[e].commits.length};t[e].active&&(o.active=!0),a.push(o)}return i({array:a,propertyForSort:"title"}),{alias:"chart",data:{title:"Коммиты",subtitle:r,values:a,users:e}}}}},786:(e,t,r)=>{const{getFormattedText:s}=r(329);e.exports={diagramPrepareData:function(e,t,{name:r}){var a=e=>0<e?`+${e}`:e.toString(),o=Object.values(e).reduce((e,t)=>e+t,0),i=s(o,"коммит",{one:"",twoFive:"а",other:"ов"}),n=a(o-Object.values(t).reduce((e,t)=>e+t,0)),o=["коммит",{one:"",twoFive:"а",other:"ов"}],a=[{valueText:s(e.extra,...o),differenceText:s(e.extra-t.extra,...o,{valueHandler:a})},{valueText:s(e.max,...o),differenceText:s(e.max-t.max,...o,{valueHandler:a})},{valueText:s(e.mid,...o),differenceText:s(e.mid-t.mid,...o,{valueHandler:a})},{valueText:s(e.min,...o),differenceText:s(e.min-t.min,...o,{valueHandler:a})}];return{alias:"diagram",data:{title:"Размер коммитов",subtitle:r,totalText:i,differenceText:`${n} с прошлого спринта`,categories:[{title:"> 1001 строки",valueText:a[0].valueText,differenceText:a[0].differenceText},{title:"501 — 1000 строк",valueText:a[1].valueText,differenceText:a[1].differenceText},{title:"101 — 500 строк",valueText:a[2].valueText,differenceText:a[2].differenceText},{title:"1 — 100 строк",valueText:a[3].valueText,differenceText:a[3].differenceText}]}}}}},428:e=>{e.exports={leadersPrepareData:function(e,{name:t}){return{alias:"leaders",data:{title:"Больше всего коммитов",subtitle:t,emoji:"👑",users:e}}}}},29:e=>{e.exports={votePrepareData:function(e,{name:t}){return{alias:"vote",data:{title:"Самый 🔎 внимательный разработчик",subtitle:t,emoji:"🔎",users:e}}}}}},o={},function e(t){if(o[t])return o[t].exports;var r=o[t]={exports:{}};return a[t](r,r.exports,e),r.exports}(138);var a,o});