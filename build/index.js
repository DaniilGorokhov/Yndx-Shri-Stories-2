!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var r,a=t();for(r in a)("object"==typeof exports?exports:e)[r]=a[r]}}(this,function(){return a={372:e=>{const a=new Map;e.exports={likes:a,commentHandler:function(e){let t;if(t="object"==typeof e.author?e.author.id:e.author,e={timestamp:e.createdAt,quantity:e.likes.length},a.has(t)){const r=a.get(t);r.push(e)}else{e=[e];a.set(t,e)}}}},183:e=>{const a=[],i=new Set;e.exports={commits:a,handledCommitsId:i,commitHandler:function(e){let t;t="object"==typeof e.author?e.author.id:e.author;var r={id:e.id,author:t,timestamp:e.timestamp};i.has(e.id)||(i.add(e.id),a.push(r))}}},327:e=>{const a=[],i=new Set;var n={};e.exports={sprints:a,handledSprintsId:i,activeSprint:n,sprintHandler:function(e,t){if(void 0===t)throw new Error("error: activeSprint argument did not pass; it is necessary argument");if(!i.has(e.id)){i.add(e.id);const r={id:e.id,name:e.name,startAt:e.startAt,finishAt:e.finishAt};e.id===t&&(r.active=!0,Object.assign(n,r)),a.push(r)}}}},919:e=>{const t=new Map;var r=new Map;e.exports={summaries:t,commitSummaries:r,summaryHandler:function(e){e={id:e.id,value:e.added+e.removed},t.has(e.id)||t.set(e.id,e)}}},542:e=>{const r=new Map;e.exports={users:r,userHandler:function(e){var t={id:e.id,name:e.name,avatar:e.avatar};return r.has(e.id)||r.set(t.id,t),t.id}}},194:e=>{e.exports={binarySearchStartByProperty:function({array:e,itemProperty:t,value:r,valueProperty:a}){let i=-1,n=e.length;for(;n-i!=1;){var s=Math.round((i+n)/2);e[s][t]>r[a]?n=s:i=s}return i}}},522:e=>{e.exports={computeHeatMap:function(t){var r=["sun","mon","tue","wed","thu","fri","sat"];const a={};for(let e=0;e<r.length;e+=1){const s=[];for(let e=0;e<24;e+=1)s.push(0);a[r[e]]=s}for(let e=0;e<t.length;e+=1){var i=t[e];const o=new Date(i.timestamp);var n=o.getDay(),i=o.getHours();a[r[n]][i]+=1}return a}}},903:e=>{e.exports={computeStatistics:function({sprints:t,commitSummaries:r,summaries:a}){var i={min:0,mid:0,max:0,extra:0};const n=[];for(let e=0;e<t.length;e+=1){const l={...i};var s=t[e];for(let e=0;e<s.length;e+=1){var o=s[e],u=r.get(o.id);let t=0;if(u)for(let e=0;e<u.length;e+=1){var m=a.get(u[e]);t+=m.value}1001<=t?l.extra+=1:501<=t?l.max+=1:101<=t?l.mid+=1:1<=t&&(l.min+=1)}n.push(l)}return n}}},329:e=>{e.exports={getFormattedText:function(e,t,r,{valueHandler:a=null}={}){var i=Math.abs(e)%10,n=(Math.abs(e)%100-i)/10;let s;return s=a?a(e):e,1==n?`${s} ${t}${r.other}`:1==i?`${s} ${t}${r.one}`:1<i&&i<5?`${s} ${t}${r.twoFive}`:`${s} ${t}${r.other}`}}},680:e=>{e.exports={sortByProperty:function({array:e,propertyForSort:i,descending:n=!1,uniqueSortMap:s=null}){e.sort((e,t)=>{var r=parseFloat(e[i]),a=parseFloat(t[i]);return r===a&&s?n?s.get(e.id)-s.get(t.id):s.get(t.id)-s.get(e.id):n?a-r:r-a})}}},560:(e,t,r)=>{const{binarySearchStartByProperty:p}=r(194);e.exports={sprintCommits:function(t,r){const a=new Map;for(let e=0;e<r.length;e+=1){var i=r[e],n={id:i.id,author:i.author,timestamp:i.timestamp},i=p({array:t,itemProperty:"startAt",value:n,valueProperty:"timestamp"});if(-1!==i){i=t[i].id;if(a.has(i)){const c=a.get(i);c.push(n)}else a.set(i,[n])}}const s=[];let o,u;for(let e=0;e<t.length;e+=1){var m=t[e];const d={id:m.id,name:m.name,commits:[],startAt:m.startAt,finishAt:m.finishAt};var l=a.get(m.id);l instanceof Array&&(d.commits=l),m.active&&(d.active=!0,o=d.commits,u=0===e?[]:s[e-1].commits),s.push(d)}return{sprintCommitsArray:s,activeCommits:o,previousCommits:u}}}},155:e=>{e.exports={userCommits:function(e,t){const a=new Map;for(let e=0;e<t.length;e+=1){var{author:r}=t[e],i=a.get(r)||0;a.set(r,i+1)}const n=[];return e.forEach((e,t)=>{const r=a.get(t)||0;e={id:e.id,name:e.name,avatar:e.avatar,valueText:r.toString()};n.push(e)}),n}}},422:(e,t,r)=>{const{getFormattedText:c}=r(329);e.exports={userLikes:function(e,o,{startAt:u,finishAt:m}){const l=[];return e.forEach((e,t)=>{const r={...e};var a=o.get(t);let i=0;if(a)for(let e=0;e<a.length;e+=1){var{timestamp:n,quantity:s}=a[e];u<=n&&n<=m&&(i+=s)}r.valueText=c(i,"голос",{one:"",twoFive:"а",other:"ов"}),l.push(r)}),l}}},138:(e,t,r)=>{const{users:g,userHandler:T}=r(542),{likes:b,commentHandler:S}=r(372),{sprints:w,activeSprint:P,sprintHandler:H}=r(327),{commits:j,commitHandler:A}=r(183),{summaries:k,commitSummaries:M,summaryHandler:$}=r(919),{userLikes:C}=r(422),{sortByProperty:D}=r(680),{sprintCommits:F}=r(560),{userCommits:q}=r(155),{computeStatistics:B}=r(903),{computeHeatMap:E}=r(522),{votePrepareData:I}=r(29),{leadersPrepareData:O}=r(428),{chartPrepareData:L}=r(146),{diagramPrepareData:U}=r(786),{activityPrepareData:z}=r(55);e.exports={prepareData:function(a,{sprintId:i}){const n=new Map;let s=0,o;for(let t=0;t<a.length;t+=1){let e={data:a[t],next:null},r=e;for(;null!==e;){var u=e.data;switch(u.type){case"User":o=T(u),n.has(o)||n.set(o,s);break;case"Comment":S(u);break;case"Commit":A(u);break;case"Issue":break;case"Summary":$(u);break;case"Sprint":H(u,i);break;case"Project":break;default:throw new Error("error: type of entity is invalid")}var m=["friends","comments","commits","issues","dependencies","likes","summaries"];for(let e=0;e<m.length;e+=1){var l,c=m[e];if(u[c])for(let t=0;t<u[c].length;t+=1){if("object"==typeof u[c][t]&&(l={data:u[c][t],next:null},r.next=l,r=l),"summaries"===c){let e=u[c][t];if("object"==typeof e&&(e=e.id),M.has(u.id)){const y=M.get(u.id);y.push(e)}else M.set(u.id,[e])}"friends"!==c&&"likes"!==c||(o="object"==typeof u[c][t]?u[c][t].id:u[c][t],n.has(o)||(n.set(o,s),s+=1))}}var d=["author","resolvedBy"];for(let e=0;e<d.length;e+=1){var p,f=d[e];u[f]&&(o="object"==typeof u[f]?(p={data:u[f],next:null},r.next=p,r=p,u[f].id):u[f],n.has(o)||(n.set(o,s),s+=1))}e=e.next}}if(0===Object.keys(P).length)throw new Error("error: active sprint did not find");D({array:w,propertyForSort:"startAt"});var{sprintCommitsArray:e,activeCommits:t,previousCommits:r}=F(w,j),v=q(g,t);D({array:v,propertyForSort:"valueText",descending:!0,uniqueSortMap:n});var h=C(g,b,P);D({array:h,propertyForSort:"valueText",descending:!0,uniqueSortMap:n});var[x,r]=B({sprints:[t,r],summaries:k,commitSummaries:M}),t=E(t);return[O(v,P),I(h,P),L(e,v,P),U(x,r,P),z(t,P)]}}},55:e=>{e.exports={activityPrepareData:function(e,{name:t}){return{alias:"activity",data:{title:"Коммиты",subtitle:t,data:e}}}}},146:e=>{e.exports={chartPrepareData:function(t,e,{name:r}){const a=[];for(let e=0;e<t.length;e+=1){const i={title:t[e].id.toString(),hint:t[e].name,value:t[e].commits.length};t[e].active&&(i.active=!0),a.push(i)}return{alias:"chart",data:{title:"Коммиты",subtitle:r,values:a,users:e}}}}},786:(e,t,r)=>{const{getFormattedText:o}=r(329);e.exports={diagramPrepareData:function(e,t,{name:r}){var a=e=>0<e?`+${e}`:e.toString(),i=Object.values(e).reduce((e,t)=>e+t,0),n=o(i,"коммит",{one:"",twoFive:"а",other:"ов"}),s=a(i-Object.values(t).reduce((e,t)=>e+t,0)),i=["коммит",{one:"",twoFive:"а",other:"ов"}],a=[{valueText:o(e.extra,...i),differenceText:o(e.extra-t.extra,...i,{valueHandler:a})},{valueText:o(e.max,...i),differenceText:o(e.max-t.max,...i,{valueHandler:a})},{valueText:o(e.mid,...i),differenceText:o(e.mid-t.mid,...i,{valueHandler:a})},{valueText:o(e.min,...i),differenceText:o(e.min-t.min,...i,{valueHandler:a})}];return{alias:"diagram",data:{title:"Размер коммитов",subtitle:r,totalText:n,differenceText:`${s} с прошлого спринта`,categories:[{title:"> 1001 строки",valueText:a[0].valueText,differenceText:a[0].differenceText},{title:"501 — 1000 строк",valueText:a[1].valueText,differenceText:a[1].differenceText},{title:"101 — 500 строк",valueText:a[2].valueText,differenceText:a[2].differenceText},{title:"1 — 100 строк",valueText:a[3].valueText,differenceText:a[3].differenceText}]}}}}},428:e=>{e.exports={leadersPrepareData:function(e,t){return{alias:"leaders",data:{title:"Больше всего коммитов",subtitle:t.name,emoji:"👑",users:e}}}}},29:e=>{e.exports={votePrepareData:function(e,t){return{alias:"vote",data:{title:"Самый 🔎 внимательный разработчик",subtitle:t.name,emoji:"🔎",users:e}}}}}},i={},function e(t){if(i[t])return i[t].exports;var r=i[t]={exports:{}};return a[t](r,r.exports,e),r.exports}(138);var a,i});