!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var r,a=e();for(r in a)("object"==typeof exports?exports:t)[r]=a[r]}}(this,function(){return a={372:t=>{const a=new Map;t.exports={likes:a,commentHandler:function(t){let e;e="object"==typeof t.author?t.author.id:t.author,t={timestamp:t.createdAt,quantity:t.likes.length};const r=a.get(e);void 0!==r?r.push(t):a.set(e,[t])}}},183:t=>{const o=[],i=new Map;t.exports={commits:o,commitSummaries:i,commitHandler:function(r){let t;t="object"==typeof r.author?r.author.id:r.author;var e={id:r.id,author:t,timestamp:r.timestamp};o.push(e);const a=[];for(let e=0;e<r.summaries.length;e+=1){let t;t="object"==typeof r.summaries[e]?r.summaries[e].id:r.summaries[e],a.push(t)}i.set(r.id,a)}}},327:t=>{const a=[],o={};t.exports={sprints:a,activeSprint:o,sprintHandler:function(t,e){if(void 0===e)throw new Error("error: activeSprint argument did not pass; it is necessary argument");const r={id:t.id,name:t.name,startAt:t.startAt,finishAt:t.finishAt};t.id===e&&(r.active=!0,o.data=r),a.push(r)}}},919:t=>{const e=new Map;var r=new Map;t.exports={summaries:e,commitSummaries:r,summaryHandler:function(t){t={id:t.id,value:t.added+t.removed},e.set(t.id,t)}}},542:t=>{const e=new Map;t.exports={users:e,userHandler:function(t){t={id:t.id,name:t.name,avatar:t.avatar},e.set(t.id,t)}}},194:t=>{t.exports={binarySearchStartByProperty:function({array:t,itemProperty:e,value:r,valueProperty:a}){let o=-1,i=t.length;for(;i-o!=1;){var n=Math.floor((o+i)/2);Math.floor(1e4*t[n][e])>Math.floor(1e4*r[a])?i=n:o=n}return o}}},522:t=>{t.exports={computeHeatMap:function(e){var r=["sun","mon","tue","wed","thu","fri","sat"];const a={};for(let t=0;t<r.length;t+=1){const n=[];for(let t=0;t<24;t+=1)n.push(0);a[r[t]]=n}for(let t=0;t<e.length;t+=1){var o=e[t];const s=new Date(o.timestamp);var i=s.getDay(),o=s.getHours();a[r[i]][o]+=1}return a}}},903:t=>{t.exports={computeStatistics:function({sprints:e,commitSummaries:r,summaries:a}){var o={min:0,mid:0,max:0,extra:0};const i=[];for(let t=0;t<e.length;t+=1){const m={...o};var n=e[t];for(let t=0;t<n.length;t+=1){var s=n[t],p=r.get(s.id);let e=0;if(p)for(let t=0;t<p.length;t+=1){var l=a.get(p[t]);e+=l.value}1001<=e?m.extra+=1:501<=e?m.max+=1:101<=e?m.mid+=1:m.min+=1}i.push(m)}return i}}},329:t=>{t.exports={getFormattedText:function(t,e,r,{valueHandler:a=null}={}){var o=Math.abs(t)%10,i=(Math.abs(t)%100-o)/10;let n;return n=a?a(t):t,1==i?`${n} ${e}${r.other}`:1==o?`${n} ${e}${r.one}`:1<o&&o<5?`${n} ${e}${r.twoFive}`:`${n} ${e}${r.other}`}}},680:t=>{t.exports={sortByProperty:function({array:t,propertyForSort:o,descending:i=!1}){t.sort((t,e)=>{var r=parseFloat(t[o]),a=parseFloat(e[o]);return r===a?i?t.id-e.id:e.id-t.id:i?a-r:r-a})}}},560:(t,e,r)=>{const{binarySearchStartByProperty:d}=r(194);t.exports={sprintCommits:function(e,r){const a=new Map;var o={startAt:e[e.length-1].finishAt};for(let t=0;t<r.length;t+=1){var i={...r[t]},n=d({array:[...e,o],itemProperty:"startAt",value:i,valueProperty:"timestamp"});if(-1!==n&&n!==e.length){n=e[n].id;const u=a.get(n);void 0!==u?u.push(i):a.set(n,[i])}}const s=[];let p,l;for(let t=0;t<e.length;t+=1){const c={...e[t]};var m=a.get(c.id);Array.isArray(m)?c.commits=m:c.commits=[],c.active&&(p=c.commits,l=0===t?[]:s[t-1].commits),s.push(c)}return{sprintCommitsArray:s,activeCommits:p,previousCommits:l}}}},155:t=>{t.exports={userCommits:function(t,e){const a=new Map;for(let t=0;t<e.length;t+=1){var{author:r}=e[t],o=a.get(r)||0;a.set(r,o+1)}const i=[];return t.forEach((t,e)=>{const r=a.get(e)||0;t={id:t.id,name:t.name,avatar:t.avatar,valueText:r.toString()};i.push(t)}),i}}},422:(t,e,r)=>{const{getFormattedText:u}=r(329);t.exports={userLikes:function(t,s,{startAt:p,finishAt:l}){const m=[];return t.forEach((t,e)=>{const r={...t};var a=s.get(e);let o=0;if(a)for(let t=0;t<a.length;t+=1){var{timestamp:i,quantity:n}=a[t];Math.floor(1e4*i)>=Math.floor(1e4*p)&&Math.floor(1e4*i)<Math.floor(1e4*l)&&(o+=n)}r.valueText=u(o,"голос",{one:"",twoFive:"а",other:"ов"}),m.push(r)}),m}}},754:t=>{class e{constructor(t){this.entities={data:t,next:null},this.tail=this.entities}next(){this.entities=this.entities.next}add(t){t={data:t,next:null};this.tail.next=t,this.tail=t}handleProperty({property:e,type:t="array-like"}){var{data:r}=this.entities;if("array-like"===t)for(let t=0;t<r[e].length;t+=1)"object"==typeof r[e][t]&&this.add(r[e][t]);else{if("not array-like"!==t)throw new Error("error: invalid type. type can be 'array-like' or 'not array-like'");"object"==typeof r[e]&&this.add(r[e])}}}t.exports={LinkedList:e}},138:(t,e,r)=>{const{LinkedList:d}=r(754),{users:f,userHandler:h}=r(542),{likes:y,commentHandler:v}=r(372),{sprints:x,activeSprint:g,sprintHandler:P}=r(327),{commits:T,commitSummaries:b,commitHandler:S}=r(183),{summaries:k,summaryHandler:w}=r(919),{userLikes:H}=r(422),{sortByProperty:M}=r(680),{sprintCommits:A}=r(560),{userCommits:F}=r(155),{computeStatistics:$}=r(903),{computeHeatMap:D}=r(522),{votePrepareData:C}=r(29),{leadersPrepareData:j}=r(428),{chartPrepareData:B}=r(146),{diagramPrepareData:E}=r(786),{activityPrepareData:L}=r(55);t.exports={prepareData:function(e,{sprintId:r}){for(let t=0;t<e.length;t+=1){var a=e[t];const c=new d(a);for(;null!==c.entities;){var o=c.entities.data;switch(o.type){case"User":h(o),c.handleProperty({property:"friends"}),o.comments&&c.handleProperty({property:"comments"}),o.commits&&c.handleProperty({property:"commits"});break;case"Comment":v(o),c.handleProperty({property:"author",type:"not array-like"}),c.handleProperty({property:"likes"});break;case"Commit":S(o),c.handleProperty({property:"author",type:"not array-like"}),c.handleProperty({property:"summaries"});break;case"Issue":o.resolvedBy&&c.handleProperty({property:"resolvedBy",type:"not array-like"}),c.handleProperty({property:"comments"});break;case"Summary":w(o),o.comments&&c.handleProperty({property:"comments"});break;case"Sprint":P(o,r);break;case"Project":c.handleProperty({property:"dependencies"}),c.handleProperty({property:"issues"}),c.handleProperty({property:"commits"});break;default:throw new Error("error: type of entity is invalid")}c.next()}}if(void 0===g.data)throw new Error("error: active sprint did not find");M({array:x,propertyForSort:"id"});var{sprintCommitsArray:t,activeCommits:i,previousCommits:n}=A(x,T),s=F(f,i);M({array:s,propertyForSort:"valueText",descending:!0});var p=H(f,y,g.data);M({array:p,propertyForSort:"valueText",descending:!0});var[l,m]=$({sprints:[i,n],summaries:k,commitSummaries:b}),u=D(i);return[j(s,g.data),C(p,g.data),B(t,s,g.data),E(l,m,g.data,i.length,n.length),L(u,g.data)]}}},55:t=>{t.exports={activityPrepareData:function(t,{name:e}){return{alias:"activity",data:{title:"Коммиты",subtitle:e,data:t}}}}},146:(t,e,r)=>{const{sortByProperty:i}=r(680);t.exports={chartPrepareData:function(e,t,{name:r}){const a=[];for(let t=0;t<e.length;t+=1){const o={title:e[t].id.toString(),hint:e[t].name,value:e[t].commits.length};e[t].active&&(o.active=!0),a.push(o)}return i({array:a,propertyForSort:"title"}),{alias:"chart",data:{title:"Коммиты",subtitle:r,values:a,users:t}}}}},786:(t,e,r)=>{const{getFormattedText:s}=r(329);t.exports={diagramPrepareData:function(t,e,{name:r},a,o){var i=t=>0<t?`+${t}`:t.toString(),n=s(a,"коммит",{one:"",twoFive:"а",other:"ов"}),a=i(a-o),o=["коммит",{one:"",twoFive:"а",other:"ов"}],i=[{valueText:s(t.extra,...o),differenceText:s(t.extra-e.extra,...o,{valueHandler:i})},{valueText:s(t.max,...o),differenceText:s(t.max-e.max,...o,{valueHandler:i})},{valueText:s(t.mid,...o),differenceText:s(t.mid-e.mid,...o,{valueHandler:i})},{valueText:s(t.min,...o),differenceText:s(t.min-e.min,...o,{valueHandler:i})}];return{alias:"diagram",data:{title:"Размер коммитов",subtitle:r,totalText:n,differenceText:`${a} с прошлого спринта`,categories:[{title:"> 1001 строки",valueText:i[0].valueText,differenceText:i[0].differenceText},{title:"501 — 1000 строк",valueText:i[1].valueText,differenceText:i[1].differenceText},{title:"101 — 500 строк",valueText:i[2].valueText,differenceText:i[2].differenceText},{title:"1 — 100 строк",valueText:i[3].valueText,differenceText:i[3].differenceText}]}}}}},428:t=>{t.exports={leadersPrepareData:function(t,{name:e}){return{alias:"leaders",data:{title:"Больше всего коммитов",subtitle:e,emoji:"👑",users:t}}}}},29:t=>{t.exports={votePrepareData:function(t,{name:e}){return{alias:"vote",data:{title:"Самый 🔎 внимательный разработчик",subtitle:e,emoji:"🔎",users:t}}}}}},o={},function t(e){if(o[e])return o[e].exports;var r=o[e]={exports:{}};return a[e](r,r.exports,t),r.exports}(138);var a,o});